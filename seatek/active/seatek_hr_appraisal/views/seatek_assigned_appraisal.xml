<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
<!--        <template id="hr_appraisal_input" name="hr_appraisal_input" inherit_id="web.assets_backend">-->
<!--            <xpath expr="." position="inside">-->
<!--                <link rel="stylesheet" href="/seatek_hr_appraisal/static/src/css/appraisal.css"/>-->
<!--            </xpath>-->
<!--        </template>-->

        <!--KPIS-->
        <record id="hr_survey_user_input_kpis_assigned_view_form" model="ir.ui.view">
            <field name="name">hr.survey.user.input.assigned.view.form</field>
            <field name="model">hr.survey.user.input</field>
            <field name="target">inline</field>
            <field name="arch" type="xml">
                <form js_class="form_appraisal" class="o_user_input" create="0" delete="false" duplicate="false">
                    <field name="is_manager" invisible="1"/>
                    <field name="manager_user_id_compute" invisible="1"/>
                    <field name="smanager_user_id_compute" invisible="1"/>
                    <field name="colleague_user_id_compute" invisible="1"/>
                    <field name="manager_status" invisible="1"/>
                    <field name="smanager_status" invisible="1"/>
                    <field name="appraisal_role" invisible="1"/>
                    <field name="lock_state_compute" invisible="1"/>
                    <field name="open_state" invisible="1"/>
                    <field name="manager_open_state" invisible="1"/>
                    <header>
                        <button  string="Import Excel" name="%(import_kpis_excel)d" type="action" class="btn-primary" style="margin-left:12px;"
                                 attrs="{'invisible': ['|','|', ('appraisal_role', '!=', 'manager'),('open_state', '=', False),('manager_open_state', '=', False)]}"/>
                        <button  string="Import Template" name="%(import_kpis_template)d" type="action" class="btn-primary" style="margin-left:12px;"
                                 attrs="{'invisible': ['|','|', ('appraisal_role', '!=', 'manager'),('open_state', '=', False),('manager_open_state', '=', False)]}"/>
                    </header>
                    <field name="lock_state" invisible="1"/>
                        <group colspan="2">
                            <group  string="THÔNG TIN NHÂN SỰ">
                                <field name="employee_name" string="Tên"/>
                            </group>
                        </group>
                    <group string="KPIS">
                        <notebook>
                            <page string="Page 6">
                                <field name="questions_6" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                    <tree editable="top" pages="kpis" class="edit_table_KPIs">
                                        <field name="appraisal_role" invisible="1"/>
                                        <field name="can_input" invisible="1"/>
                                        <field name="enable_edit_title" invisible="1"/>
                                        <field name="page_name" invisible="1"/>
                                        <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                        <field name="question_name" attrs="{'readonly':[('enable_edit_title','!=',True)]}" class="o_field_value_text"/>
                                        <field name="enable_edit_percentage" invisible="1"/>
                                        <field name="percentage" attrs="{'readonly':[('appraisal_role','!=','manager')]}"/>
                                        <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                        <field name="value" readonly="1" class="o_field_value_number"/>
                                        <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                        <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                        <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                        <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                        <field name="colleague_comment" class="o_field_value_text"/>
                                        <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="colleague2_comment" class="o_field_value_text"/>
                                        <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="colleague3_comment" class="o_field_value_text"/>
                                        <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                        <field name="summary_level" invisible="0"/>
                                        <field name="max_score" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Page 7">
                                <field name="questions_7" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                    <tree editable="top" class="edit_table_KPIs">
                                        <field name="appraisal_role" invisible="1"/>
                                        <field name="can_input" invisible="1"/>
                                        <field name="enable_edit_title" invisible="1"/>
                                        <field name="page_name" invisible="1"/>
                                        <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                        <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                        <field name="enable_edit_percentage" invisible="1"/>
                                        <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                        <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                        <field name="value" readonly="1" class="o_field_value_number"/>
                                        <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                        <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                        <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                        <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                        <field name="colleague_comment" class="o_field_value_text"/>
                                        <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="colleague2_comment" class="o_field_value_text"/>
                                        <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="colleague3_comment" class="o_field_value_text"/>
                                        <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                        <field name="summary_level" invisible="0"/>
                                        <field name="max_score" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Page 8">
                                <field name="questions_8" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                    <tree editable="top" class="edit_table_KPIs">
                                        <field name="appraisal_role" invisible="1"/>
                                        <field name="can_input" invisible="1"/>
                                        <field name="enable_edit_title" invisible="1"/>
                                        <field name="page_name" invisible="1"/>
                                        <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                        <field name="enable_edit_percentage" invisible="1"/>
                                        <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                        <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                        <field name="value" readonly="1" class="o_field_value_number"/>
                                        <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                        <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                        <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                        <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                        <field name="colleague_comment" class="o_field_value_text"/>
                                        <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                        <field name="summary_level" invisible="0"/>
                                        <field name="max_score" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Page 9">
                                <field name="questions_9" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                    <tree editable="top" class="edit_table_KPIs">
                                        <field name="appraisal_role" invisible="1"/>
                                        <field name="can_input" invisible="1"/>
                                        <field name="enable_edit_title" invisible="1"/>
                                        <field name="page_name" invisible="1"/>
                                        <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                        <field name="enable_edit_percentage" invisible="1"/>
                                        <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                        <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                        <field name="value" readonly="1" class="o_field_value_number"/>
                                        <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                        <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                        <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                        <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                        <field name="colleague_comment" class="o_field_value_text"/>
                                        <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                        <field name="summary_level" invisible="0"/>
                                        <field name="max_score" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Page 10">
                                <field name="questions_10" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                    <tree editable="top" class="edit_table_KPIs">
                                        <field name="appraisal_role" invisible="1"/>
                                        <field name="can_input" invisible="1"/>
                                        <field name="enable_edit_title" invisible="1"/>
                                        <field name="page_name" invisible="1"/>
                                        <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                        <field name="enable_edit_percentage" invisible="1"/>
                                        <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                        <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                        <field name="value" readonly="1" class="o_field_value_number"/>
                                        <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                        <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                        <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                        <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                        <field name="colleague_comment" class="o_field_value_text"/>
                                        <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                        <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                        <field name="summary_level" invisible="0"/>
                                        <field name="max_score" invisible="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </group>
                </form>
            </field>
        </record>
        <record id="danh_gia_kpis_assigned_action" model="ir.actions.act_window">
            <field name="name">Đánh Giá KPIS</field>
            <field name="res_model">hr.survey.user.input</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" eval="False"/>
        </record>
        <record id="danh_gia_kpis_assigned_action_form" model="ir.actions.act_window.view">
            <field name="sequence" eval="4"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hr_survey_user_input_kpis_assigned_view_form"/>
            <field name="act_window_id" ref="danh_gia_kpis_assigned_action"/>
        </record>
        <record id="hr_survey_danh_gia_kpis_assigned" model="ir.actions.server">
            <field name="name">Đánh Giá KPIS</field>
            <field name="model_id" ref="model_hr_survey_user_input"/>
            <field name="state">code</field>
            <field name="code">
action_values = env.ref('seatek_hr_appraisal.danh_gia_kpis_assigned_action').read()[0]

res_id = env['hr.survey.user.input'].search([('id','=',record.id)], limit=1)

if res_id:
    appraisal_role=''
    emp = env['hr.employee.multi.company'].sudo().search(['|','|',('id', '=', res_id.colleague_multi_id.id),('id', '=', res_id.colleague2_multi_id.id),('id',
                '=', res_id.colleague3_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'colleague'

    emp = env['hr.employee.multi.company'].sudo().search([('id', '=', res_id.smanager_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'smanager'
    emp = env['hr.employee.multi.company'].sudo().search([('id', '=', res_id.manager_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'manager'

    if res_id.open_state:
        if appraisal_role=='manager':
            if res_id.manager_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
        elif appraisal_role=='smanager':
            if res_id.smanager_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
        elif appraisal_role=='colleague':
            if res_id.colleague_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
    else:
        action_values.update({'context':{'edit':0}})
    action_values.update({'res_id': res_id.id})
action = action_values
            </field>
        </record>
        <!---SEACORP-->
        <record id="hr_survey_user_input_seacorp_assigned_view_form" model="ir.ui.view">
            <field name="name">hr.survey.user.input.seacorp.assigned.view.form</field>
            <field name="model">hr.survey.user.input</field>
            <field name="target">inline</field>
            <field name="arch" type="xml">
                <form js_class="form_appraisal" class="o_user_input" create="0" delete="false" duplicate="false">
                    <field name="is_manager" invisible="1"/>
                    <field name="manager_user_id_compute" invisible="1"/>
                    <field name="smanager_user_id_compute" invisible="1"/>
                    <field name="colleague_user_id_compute" invisible="1"/>
                    <field name="colleague2_user_id_compute" invisible="1"/>
                    <field name="colleague3_user_id_compute" invisible="1"/>
                    <field name="manager_status" invisible="1"/>
                    <field name="smanager_status" invisible="1"/>
                    <field name="appraisal_role" invisible="1"/>
                    <field name="lock_state_compute" invisible="1"/>
                    <field name="open_state" invisible="1"/>
                    <header>

                    </header>
                    <field name="lock_state" invisible="1"/>

                        <group colspan="2">
                            <group  string="THÔNG TIN NHÂN SỰ">
                                <field name="employee_name" string="Tên"/>
                            </group>
                        </group>
                   <group string="SEACORP">
                        <notebook>
                        <page string="question_1">
                            <field name="questions_1" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages="seacorp" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="enable_edit_percentage" invisible="1"/>
                                    <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                    <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                    <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="max_score" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Page 2">
                            <field name="questions_2" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages="seacorp" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="enable_edit_percentage" invisible="1"/>
                                    <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                    <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                    <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="max_score" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Page 3">
                            <field name="questions_3"  widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages="seacorp" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="enable_edit_percentage" invisible="1"/>
                                    <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                    <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                    <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="max_score" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Page 4">
                            <field name="questions_4" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages="seacorp" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="enable_edit_percentage" invisible="1"/>
                                    <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                    <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                    <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="max_score" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Page 5">
                            <field name="questions_5" widget="appraisalUser_one2many"  options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages="seacorp" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="enable_edit_percentage" invisible="1"/>
                                    <field name="percentage" attrs="{'invisible':[('enable_edit_percentage','=',False)]}"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'invisible':[('appraisal_role','!=','manager')]}" class="o_field_value_text"/>
                                    <field name="value_manager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','manager')]}" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'invisible':[('appraisal_role','!=','smanager')]}" class="o_field_value_text"/>
                                    <field name="value_smanager" attrs="{'readonly':['|',('can_input','=',False),('appraisal_role','!=','smanager')]}" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" attrs="{'readonly':[('can_input','=',False)]}" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="max_score" invisible="1"/>
                                </tree>
                            </field>
                        </page>

                    </notebook>
                    </group>
                </form>
            </field>
        </record>
        <record id="danh_gia_seacorp_assigned_action" model="ir.actions.act_window">
            <field name="name">Đánh Giá KPIS</field>
            <field name="res_model">hr.survey.user.input</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" eval="False"/>
        </record>
        <record id="danh_gia_seacorp_assigned_action_form" model="ir.actions.act_window.view">
            <field name="sequence" eval="4"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hr_survey_user_input_seacorp_assigned_view_form"/>
            <field name="act_window_id" ref="danh_gia_seacorp_assigned_action"/>
        </record>
        <record id="hr_survey_danh_gia_seacorp_assigned" model="ir.actions.server">
            <field name="name">Đánh Giá KPIS</field>
            <field name="model_id" ref="model_hr_survey_user_input"/>
            <field name="state">code</field>
            <field name="code">
action_values = env.ref('seatek_hr_appraisal.danh_gia_seacorp_assigned_action').read()[0]

res_id = env['hr.survey.user.input'].search([('id','=',record.id)], limit=1)
if res_id:
    appraisal_role=''
    emp = env['hr.employee.multi.company'].sudo().search(['|','|',('id', '=', res_id.colleague_multi_id.id),('id', '=', res_id.colleague2_multi_id.id),('id',
                '=', res_id.colleague3_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'colleague'

    emp = env['hr.employee.multi.company'].sudo().search([('id', '=', res_id.smanager_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'smanager'
    emp = env['hr.employee.multi.company'].sudo().search([('id', '=', res_id.manager_multi_id.id)])
    if emp:
        if emp.user_id.id == env.user.id:
            appraisal_role = 'manager'

    if res_id.open_state:
        if appraisal_role=='manager':
            if res_id.manager_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
        elif appraisal_role=='smanager':
            if res_id.smanager_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
        elif appraisal_role=='colleague':
            if res_id.colleague_open_state:
                action_values.update({'context':{'edit':1}})
            else:
                action_values.update({'context':{'edit':0}})
    else:
        action_values.update({'context':{'edit':0}})
    action_values.update({'res_id': res_id.id})
action_values.update({'res_id': res_id.id})
action = action_values
            </field>
        </record>
        <!--GENERAL-->
        <record id="hr_survey_user_input_assigned_appraisal_view_search" model="ir.ui.view">
            <field name="name">hr.survey.user.input.assigned.view.search.view</field>
            <field name="model">hr.survey.user.input</field>
            <field name="arch" type="xml">
                <search string="Search...">
                    <filter name="open_state" string="Kỳ đang mở" domain="[('open_state', '=', True)]"/>
                    <filter name="close_state" string="Kỳ đã đóng" domain="[('open_state', '=', False)]"/>
                    <filter name="da_danh_gia" string="Đã đánh giá"
                            domain="['|','&amp;',('user_manager_id','=',uid),('manager_status', '=', True),'&amp;',('user_smanager_id','=',uid),('smanager_status', '=', True)]"/>
                    <filter name="da_danh_gia" string="Chưa đánh giá"
                            domain="['|','&amp;',('user_manager_id','=',uid),('manager_status', '=', False),'&amp;',('user_smanager_id','=',uid),('smanager_status', '=', False)]"/>

                    <field name="name" string="Name" filter_domain="[('name', 'ilike', self)]"/>
                    <field name="lock_state" string="Có đánh giá" filter_domain="[('lock_state','=','no')]"/>

                    <filter string="Nhân sự hoàn thành" name="nhansu_status" domain="[('nhansu_status','=','yes')]"/>

                    <filter string="QLTT đề xuất HĐĐG." name="de_xuat_dg_tai_hddg_manager" domain="[('de_xuat_dg_tai_hddg_manager','=',True)]"/>
                    <filter string="Nhân sự không đủ điều kiện đánh giá" name="lock_state_no" domain="[('lock_state','=','no')]"/>
                    <filter string="Nhân sự đủ điều kiện đánh giá" name="lock_state_yes" domain="[('lock_state','=','yes')]"/>

                    <filter string="Vai trò QLTT" name="user_manager_id" domain="[('user_manager_id','=',uid)]"/>
                    <filter string="Vai trò Cấp trên QLTT" name="user_smanager_id" domain="[('user_smanager_id','=',uid)]"/>
                    <filter string="Vai trò đồng nghiệp" name="user_colleague_id"
                            domain="['|','|',('user_colleague_id','=',uid),('user_colleague2_id','=',uid),('user_colleague3_id','=',uid)]"/>
                    <group expand="0" string="Group By">
                        <filter name="group_appraisal_id" string="Kỳ đánh giá" domain="[]" context="{'group_by':'appraisal_id'}"/>
                        <filter name="group_company_id" string="Công ty" domain="[]" context="{'group_by':'company_id'}"/>
                        <filter name="group_department_id" string="Phòng ban" domain="[]" context="{'group_by':'department_id'}"/>
                        <filter name="group_employee_multi_id" string="Nhân Viên" domain="[]" context="{'group_by':'employee_multi_id'}"/>
                    </group>
                </search>
            </field>
        </record>
        <record id="hr_survey_user_input_assigned_appraisal_view" model="ir.ui.view">
            <field name="name">hr.survey.user.input.kanban</field>
            <field name="model">hr.survey.user.input</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <kanban class="o_hr_appraisal_user_input_kanban" create="0">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="appraisal_role"/>
                    <field name="manager_status"/>
                    <field name="smanager_status" invisible="1"/>
                    <field name="lock_state"/>
                    <field name="lock_state_compute" invisible="1"/>
                    <field name="manager_status_name" invisible="1"/>
                    <field name="open_state" invisible="1"/>

                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click  o_hr_appraisal_kanban">
                                <div class="oe_kanban_details">
                                    <div>
                                        <strong>
                                            <field name="employee_name"/>
                                        </strong>
                                        <field name="user_input_status" string="Trạng Thái" attrs="{'invisible': [('lock_state', '!=', 'no')]}"/>
                                        <field name="nhansu_status_name" string="Trạng Thái" attrs="{'invisible': [('lock_state', '=', 'no')]}"/>
                                    </div>
                                    <p>
                                        <field name="appraisal_id"/>
                                    </p>
                                    <field name="lock_state" invisible="1"/>
                                    <span attrs="{'invisible':[('manager_multi_id','=',False)]}">QLTT: <field name="manager_multi_id" /> - <field
                                            name="manager_status_name"/></span>
                                    <div>
                                        <span attrs="{'invisible':[('smanager_multi_id','=',False)]}">CẤP TRÊN QLTT: <field name="smanager_multi_id" /> -
                                            <field
                                                name="smanager_status_name"/></span>
                                    </div>
                                    <button  string="Không Đánh Giá" name="lock_appraisal" type="object" class="btn-primary"
                                             attrs="{'invisible': ['|','|','|',('lock_state', '=',
                                    'no'),('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">KHÔNG
                                        ĐÁNH GIÁ</button>
                                    <button  string="Đánh Giá" name="lock_appraisal" type="object" class="btn-primary" attrs="{'invisible': ['|','|','|',('lock_state', '=',
                                    'no'),('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">ĐÁNH GIÁ</button>
                                    <button  string="Đã Hoàn Thành" name="manager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|','|',('lock_state', '=', 'no'),('manager_status', '=', True),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}" style="margin-left:5px">Đã Hoàn Thành</button>
                                    <button  string="Tiếp Tục Đánh Giá" name="manager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|','|',('lock_state', '=', 'no'),('manager_status', '=', False),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}" style="margin-left:5px">Tiếp Tục Đánh Giá</button>
                                    <button  string="Đã hoàn thành" name="smanager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|','|',('lock_state', '=', 'no'),('smanager_status', '=', True),('appraisal_role', '!=', 'smanager'),('open_state', '=', False)]}" style="margin-left:5px">Đã Hoàn Thành</button>
                                    <button  string="Tiếp tục đánh giá" name="smanager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|','|',('lock_state', '=', 'no'),('smanager_status', '=', False),('appraisal_role', '!=', 'smanager'),('open_state', '=', False)]}" style="margin-left:5px">Tiếp Tục Đánh Giá</button>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="hr_appraisal_assigned_user_input_view_form" model="ir.ui.view">
            <field name="name">hr.survey.user.input.assigned.view.form</field>
            <field name="model">hr.survey.user.input</field>
            <field name="target">inline</field>
            <field name="arch" type="xml">
                <form js_class="form_appraisal" class="o_user_input" create="0" delete="false" duplicate="false">
                    <field name="is_manager" invisible="1"/>
                    <field name="manager_user_id_compute" invisible="1"/>
                    <field name="smanager_user_id_compute" invisible="1"/>
                    <field name="colleague_user_id_compute" invisible="1"/>
                    <field name="colleague2_user_id_compute" invisible="1"/>
                    <field name="colleague3_user_id_compute" invisible="1"/>
                    <field name="manager_status" invisible="1"/>
                    <field name="smanager_status" invisible="1"/>
                    <field name="appraisal_role" invisible="1"/>
                    <field name="lock_state_compute" invisible="1"/>
                    <field name="open_state" invisible="1"/>

                    <header>

                    </header>
                    <field name="lock_state" invisible="1"/>
                    <button  string="Đã hoàn thành" name="manager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|',('manager_status', '=', True),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}"/>
                    <button  string="Tiếp tục đánh giá" name="manager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|',('manager_status', '=', False),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}"/>
                    <button  string="Đã hoàn thành" name="smanager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|',('smanager_status', '=', True),('appraisal_role', '!=', 'smanager'),('open_state', '=', False)]}"/>
                    <button  string="Tiếp tục đánh giá" name="smanager_status_action" type="object" class="btn-primary"  attrs="{'invisible': ['|','|',('smanager_status', '=', False),('appraisal_role', '!=', 'smanager'),('open_state', '=', False)]}"/>
                    <button  string="Đánh Giá SEACORP" name="%(hr_survey_danh_gia_seacorp_assigned)d" type="action" class="btn-primary" style="margin-left:12px;"/>
                    <button  string="Đánh Giá KPIS" name="%(hr_survey_danh_gia_kpis_assigned)d" type="action" class="btn-primary" style="margin-left:12px;"
                             attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}"/>
                    <button  string="Export Excel" name="export_excel_appraisal" type="object" class="btn-primary"
                             attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}" style="margin-left:12px;"/>
                    <div style="margin-top:12px;" attrs="{'invisible': ['|','|',('manager_status', '=', False),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}">
                        <span>ANH CHỊ ĐÃ HOÀN THÀNH ĐÁNH GIÁ - NẾU CẦN ĐÁNH GIÁ LẠI ANH CHỊ CHỌN "TIẾP TỤC ĐÁNH GIÁ"</span>
                    </div>
                    <div style="margin-top:12px;" attrs="{'invisible': ['|','|',('manager_status', '=', True),('appraisal_role', '!=', 'manager'),('open_state', '=', False)]}">
                        <span>ANH CHỊ CHỌN "ĐÃ HOÀN THÀNH" ĐỂ HOÀN THÀNH BÀI ĐÁNH GIÁ</span>
                    </div>
                    <group class="oe_edit_only">
                        <div>
                        <label for="reason_lock" string="Lý do nhân sự không đủ điều kiện đánh giá" class="oe_edit_only"
                               attrs="{'invisible':['|','|','|','|',('lock_state','=','no'),('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3'),('open_state', '=', False)]}"/>
                        <field name="reason_lock" class="oe_edit_only"
                               attrs="{'invisible':['|','|','|','|',('lock_state','=','no'),('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3'),('open_state', '=', False)]}"/>
                        </div>
                        <div class="oe_button_box" name="button_box"
                             attrs="{'invisible':['|','|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3'),('open_state', '=', False)]}">
                            <button name="lock_appraisal" type="object" class="oe_stat_button" icon="fa-check">
                                <field name="lock_state_compute" widget="khongdanhgia_button" options='{"terminology": "active"}'/>
                            </button>
                        </div>

                    </group>
                    <group>
                        <group colspan="2">
                            <group  string="THÔNG TIN NHÂN SỰ">
                                <field name="appraisal_id" string="Kỳ" options="{'no_open': True}" readonly="1"/>
                                <field name="employee_name" string="Tên"/>
                                <field name="s_identification_id" string="SeaCode"/>
                                <field name="company_id" string="Công ty" options="{'no_open': True}" context="{'test_company': True}" readonly="1"/>
                                <field name="department_name"/>
                                <field name="job_position"/>
                                <field name="lock_state" string="Đánh giá" invisible="1"/>
                                <field name="manager_name"/>
                                <field name="smanager_name"/>
                                <field name="survey_id" readonly="1" invisible="1"/>
                                <field name="employee_id" invisible="1"/>
                            </group>
                            <group>
                                <span>HƯỚNG DẪN XẾP LOẠI</span><br/>
                                <table style="width:100%" class="de_xuat">

                                    <tr style="text-align:center;">
                                        <th rowspan="2">XẾP LOẠI</th>
                                        <th rowspan="2">ĐIỂM TB CHUNG</th>
                                        <th colspan="2">THÀNH TÍCH</th>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <th>SEACORP</th>
                                        <th>KPIs</th>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <td>A</td>
                                        <td>Từ 4,5 đến 5,0</td>
                                        <td>TIÊU BIỂU</td>
                                        <td>CHUYÊN NGHIỆP</td>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <td>B</td>
                                        <td>Từ 3,5 đến 4,5</td>
                                        <td>PHÁT HUY TỐT</td>
                                        <td>HOÀN THÀNH TỐT</td>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <td>C</td>
                                        <td>Từ 2,5 đến 3,5</td>
                                        <td>PHÁT HUY</td>
                                        <td>HOÀN THÀNH</td>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <td>D</td>
                                        <td>Từ 1,5 đến 2,5</td>
                                        <td>CHƯA PHÁT HUY</td>
                                        <td>KHÔNG HOÀN THÀNH</td>
                                    </tr>
                                    <tr style="text-align:center;">
                                        <td>E</td>
                                        <td>Dưới 1,5</td>
                                        <td>KHÔNG PHÙ HỢP</td>
                                        <td>KHÔNG PHÙ HỢP</td>
                                    </tr>
                                </table><br/>
                                <div style="margin-top:12px;"></div>
                                <br/>

                            </group>
                        </group><br/>
                        <group colspan="2" string="Đề Xuất Lên Hội Đồng Đánh Giá" >
                             <table style="width:100%" class="de_xuat">
                                <tr>
                                    <th style="text-align:center;">Người Đề Xuất</th>
                                    <th style="text-align:center;">Đề Xuất</th>
                                    <th style="text-align:center;width:40%;">Lý Do</th>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>Nhân Viên: <field name="employee_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_user" readonly="1"/></td>
                                    <td><field name="de_xuat_lydo_user" readonly="1"/></td>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>QLTT: <field name="manager_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="de_xuat_lydo_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>Cấp Trên QLTT: <field name="smanager_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="de_xuat_lydo_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                </tr>
                                 <tr
                                         attrs="{'invisible':[('appraisal_role','!=','colleague')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_colleague" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                    <td><field name="de_xuat_lydo_colleague" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                </tr>
                                 <tr attrs="{'invisible':[('appraisal_role','!=','colleague2')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_colleague2"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                    <td><field name="de_xuat_lydo_colleague2"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                </tr>
                                 <tr attrs="{'invisible':[('appraisal_role','!=','colleague3')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="de_xuat_dg_tai_hddg_colleague3"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                    <td><field name="de_xuat_lydo_colleague3"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                </tr>
                            </table><br/>
                        </group><br/>

                        <group colspan="1" string="Đề Xuất Lương - Thưởng - Chức Vụ - Thuyên Chuyển">
                             <table style="width:100%" class="de_xuat">
                                <tr>
                                    <th style="text-align:center;">Người Đề Xuất</th>
                                    <th style="text-align:center;">Lương</th>
                                    <th style="text-align:center;">Thưởng</th>
                                    <th style="text-align:center;">Chức Vụ</th>
                                    <th style="text-align:center;">Thuyên Chuyển</th>
                                    <th style="text-align:center;">Ý Kiến Đánh Giá</th>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>Nhân Viên: <field name="employee_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="dexuat_salary_user" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_user" readonly="1"/></td>
                                    <td><field name="dexuat_chucvu_user" readonly="1"/></td>
                                    <td><field name="dexuat_thuyenchuyen_user" readonly="1"/></td>
                                    <td><field name="user_opinion" readonly="1"/></td>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>QLTT: <field name="manager_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="dexuat_salary_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_chucvu_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_thuyenchuyen_manager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="manager_opinion" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','manager'),('open_state', '=', False)]}"/></td>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>Cấp Trên QLTT: <field name="smanager_name" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="dexuat_salary_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_chucvu_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_thuyenchuyen_smanager" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                    <td><field name="smanager_opinion" attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','smanager'),('open_state', '=', False)]}"/></td>
                                </tr>
                                <tr
                                        attrs="{'invisible':['|','|',('appraisal_role','=','colleague'),('appraisal_role','=','colleague2'),('appraisal_role','=','colleague3')]}">
                                    <td>HĐĐG</td>
                                    <td style="text-align:center;"><field name="dexuat_salary_hddg" readonly="1"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_hddg" readonly="1"/></td>
                                    <td><field name="dexuat_chucvu_hddg" readonly="1"/></td>
                                    <td><field name="dexuat_thuyenchuyen_hddg" readonly="1"/></td>
                                    <td><field name="hddg_opinion" readonly="1"/></td>
                                </tr>
                                 <tr attrs="{'invisible':[('appraisal_role','!=','colleague')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="dexuat_salary_colleague"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_colleague"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_chucvu_colleague"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_thuyenchuyen_colleague"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)]}"/></td>
                                    <td><field name="colleague_opinion"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague'),('open_state', '=', False)],'invisible':[('appraisal_role','!=','colleague')]}"/></td>
                                </tr>
                                <tr attrs="{'invisible':[('appraisal_role','!=','colleague2')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="dexuat_salary_colleague2"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_colleague2"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_chucvu_colleague2"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_thuyenchuyen_colleague2"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)]}"/></td>
                                    <td><field name="colleague2_opinion"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague2'),('open_state', '=', False)],'invisible':[('appraisal_role','!=','colleague2')]}"/></td>
                                </tr>

                                 <tr attrs="{'invisible':[('appraisal_role','!=','colleague3')]}">
                                    <td>Đồng Nghiệp</td>
                                    <td style="text-align:center;"><field name="dexuat_salary_colleague3"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                    <td style="text-align:center;"><field name="dexuat_thuong_colleague3"
                                                                          attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_chucvu_colleague3"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                    <td><field name="dexuat_thuyenchuyen_colleague3"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)]}"/></td>
                                    <td><field name="colleague3_opinion"
                                               attrs="{'readonly':['|','|',('lock_state','=','no'),('appraisal_role','!=','colleague3'),('open_state', '=', False)],'invisible':[('appraisal_role','!=','colleague3')]}"/></td>
                                </tr>
                             </table>
                        </group>

                    </group>
                    <notebook>
                        <page string="Page 0">
                            <field name="question_general" widget="appraisalUser_one2many" options="{'no_create':True}" attrs="{'readonly':['|',('lock_state','=','no'),('open_state', '=', False)]}">
                                <tree editable="top" pages='seacorp' general="True" class="edit_table_SEACORP">
                                    <field name="appraisal_role" invisible="1"/>
                                    <field name="can_input" invisible="1"/>
                                    <field name="enable_edit_title" invisible="1"/>
                                    <field name="page_name" invisible="1"/>
                                    <field name="prefix" invisible="0" class="o_field_value_prefix edit_STT" readonly="1"/>
                                    <field name="question_name" attrs="{'readonly':[('enable_edit_title','=',False)]}" class="o_field_value_text"/>
                                    <field name="all_comment_no_colleague" readonly="1" class="o_field_value_text"/>
                                    <field name="value" readonly="1" class="o_field_value_number"/>
                                    <field name="manager_comment" attrs="{'readonly':[('is_rating','=',True)]}" class="o_field_value_text"/>
                                    <field name="value_manager" readonly="1" class="o_field_value_number"/>
                                    <field name="smanager_comment" attrs="{'readonly':[('is_rating','=',True)]}" class="o_field_value_text"/>
                                    <field name="value_smanager" readonly="1" class="o_field_value_number"/>
                                    <field name="colleague_comment" class="o_field_value_text"/>
                                    <field name="value_colleague" readonly="1" class="o_field_value_number"/>
                                    <field name="colleague2_comment" class="o_field_value_text"/>
                                    <field name="value_colleague2" readonly="1" class="o_field_value_number"/>
                                    <field name="colleague3_comment" class="o_field_value_text"/>
                                    <field name="value_colleague3" readonly="1" class="o_field_value_number"/>
                                    <field name="value_hddg" readonly="1" class="o_field_value_number"/>
                                    <field name="summary_level" invisible="0"/>
                                    <field name="is_rating" invisible="0"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="action_assigned_appraisal_user_action" model="ir.actions.act_window" >
            <field name="name">ĐÁNH GIÁ NHÂN VIÊN/ĐỒNG NGHIỆP</field>
            <field name="res_model">hr.survey.user.input</field>
            <field name="view_mode">tree,kanban,form</field>
            <field
                    name="domain">['|','|','|','|',('user_manager_id','=',uid),('user_smanager_id','=',uid),('user_colleague_id','=',uid),('user_colleague2_id','=',
                uid),('user_colleague3_id','=',uid)]</field>
            <field name="context">{'search_default_group_appraisal_id': 1,'search_default_lock_state_yes': 1,'get_short_name':True}</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="hr_survey_user_input_assigned_appraisal_view_search"/>
        </record>
        <record id="action_assigned_appraisal_user_action_kanban" model="ir.actions.act_window.view">
            <field name="sequence" eval="4"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="hr_survey_user_input_assigned_appraisal_view"/>
            <field name="act_window_id" ref="action_assigned_appraisal_user_action"/>
        </record>

        <record id="action_assigned_appraisal_user_action_form" model="ir.actions.act_window.view">
            <field name="sequence" eval="5"/>
            <field name="view_mode">form</field>
            <field name="target">current</field>
            <field name="view_id" ref="hr_appraisal_assigned_user_input_view_form"/>
            <field name="act_window_id" ref="action_assigned_appraisal_user_action"/>
        </record>
        <record id="hr_survey_user_input_assigned_appraisal_view_tree" model="ir.ui.view">
            <field name="name">hr.survey.user.assigned.view.tree</field>
            <field name="model">hr.survey.user.input</field>
            <field name="arch" type="xml">
                <tree class="sticky_table_header" create="0">
                    <field name="job_code_compute" invisible="1"/>
                    <field name="appraisal_id" string="Kỳ đánh giá" readonly="0"
                           options="{'no_create': True}" attrs="{'required':True}"
                           domain="[('appraisal_mode','=','open')]"/>
                    <field name="company_id"/>
                    <field name="s_identification_id" string="SeaCode Cấp Trên QLTT"/>
                    <field name="employee_id" invisible="1" attrs="{'required':True}"/>
                    <field name="employee_multi_id" attrs="{'required':True}" string="Đánh giá cho nhân sự"/>
                    <field name="manager_role_name"/>
                    <field name="lock_state" invisible="1"/>
                    <field name="department_id" string="Đơn vị"/>
                    <field name="department_id" string="Đơn vị"/>
                    <field name="assigned_complete_compute" invisible="0"/>
                </tree>
            </field>
        </record>
        <record id="action_assigned_appraisal_user_action_tree" model="ir.actions.act_window.view">
            <field name="sequence" eval="3"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="hr_survey_user_input_assigned_appraisal_view_tree"/>
            <field name="act_window_id" ref="action_assigned_appraisal_user_action"/>
        </record>
        <!--
        <record id="disable_edit_user_input" model="ir.ui.view">
            <field name="name">hr.survey.user.input.disable</field>
            <field name="model">hr.survey.user.input</field>
            <field name="inherit_id" ref="seatek_hr_appraisal.hr_appraisal_assigned_user_input_view_form"/>
            <field name="lock_state"/>
            <field name="arch" type="xml">
                <xpath expr="/form" position="attributes">
                    <attribute name="edit">false: lock_state='lock'</attribute>
                </xpath>
            </field>
        </record>-->
    </data>
</odoo>